import{ar as m,r as t,f as g}from"./index-Cx4nsS82.js";const G=m("player",()=>{const u=t(null),l=t([]),e=t(-1),v=t(!1),c=t(80),r=t(0),f=t(0),s=t("order"),o=t(!0),i=t(!1),n=t(!1),d=g(()=>l.value.length===0?!1:s.value==="single"?!0:e.value<l.value.length-1||s.value==="loop"),h=g(()=>l.value.length===0?!1:s.value==="single"?!0:e.value>0||s.value==="loop");return{currentSong:u,playlist:l,currentIndex:e,isPlaying:v,volume:c,currentTime:r,duration:f,playMode:s,isMiniMode:o,isPlayerVisible:i,showPlaylistSlideover:n,hasNext:d,hasPrev:h,playSong:(a,p=!0)=>{if(u.value=a,p){const y=l.value.findIndex(P=>P.id===a.id);y>=0?e.value=y:(l.value.push(a),e.value=l.value.length-1)}v.value=!0},togglePlay:()=>{v.value=!v.value},playNext:()=>{if(l.value.length!==0)switch(s.value){case"single":r.value=0;break;case"random":e.value=Math.floor(Math.random()*l.value.length),u.value=l.value[e.value];break;case"loop":e.value=(e.value+1)%l.value.length,u.value=l.value[e.value];break;case"order":default:e.value<l.value.length-1?(e.value++,u.value=l.value[e.value]):v.value=!1;break}},playPrev:()=>{if(l.value.length!==0)switch(s.value){case"single":r.value=0;break;case"random":e.value=Math.floor(Math.random()*l.value.length),u.value=l.value[e.value];break;case"loop":e.value=e.value===0?l.value.length-1:e.value-1,u.value=l.value[e.value];break;case"order":default:e.value>0&&(e.value--,u.value=l.value[e.value]);break}},setVolume:a=>{c.value=Math.max(0,Math.min(100,a))},setPlayMode:a=>{s.value=a},updateTime:a=>{r.value=a},updateDuration:a=>{f.value=a},seekTo:a=>{r.value=a},clearPlaylist:()=>{l.value=[],e.value=-1,u.value=null,v.value=!1},removeFromPlaylist:a=>{a<0||a>=l.value.length||(l.value.splice(a,1),a===e.value?l.value.length===0?(u.value=null,e.value=-1,v.value=!1):(e.value=Math.min(e.value,l.value.length-1),u.value=l.value[e.value]):a<e.value&&e.value--)},playByIndex:a=>{a<0||a>=l.value.length||(e.value=a,u.value=l.value[a],v.value=!0)},toggleMiniMode:()=>{o.value=!o.value,o.value&&(i.value=!1)},showPlayer:()=>{i.value=!0,o.value=!1},hidePlayer:()=>{i.value=!1,o.value=!0},openPlaylistSlideover:()=>{n.value=!0},closePlaylistSlideover:()=>{n.value=!1},togglePlaylistSlideover:()=>{n.value=!n.value}}},{persist:{key:"mimusic-player",storage:localStorage}});export{G as u};
